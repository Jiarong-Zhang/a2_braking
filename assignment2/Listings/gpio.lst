C166 COMPILER V7.57.0, GPIO                                                                10/07/2022 00:54:52 PAGE 1   


C166 COMPILER V7.57.0, COMPILATION OF MODULE GPIO
OBJECT MODULE PLACED IN .\Objects\gpio.obj
COMPILER INVOKED BY: D:\Keil\C166\BIN\C166.EXE Drivers\gpio.c BROWSE MOD167 DEBUG PRINT(.\Listings\gpio.lst) TABS(2) OBJ
                    -ECT(.\Objects\gpio.obj) 

 stmt lvl     source

    1         // a1793769 - Emily Zhang
    2         /**
    3          * File name: gpio.c
    4          * Description: Implementation for GPIO functions
    5         **/
    6         
    7         /********** Include required submodules**********/
    8         
    9         #include "Drivers/gpio.h"
   10         
   11         /********** Function Definitions **********/
   12         
   13         // Set a P2 pin's I/O direcion 
   14         void setPinDirectionP2(unsigned int pin_num, unsigned int direction)
   15         {
   16  1        if (direction == INPUT)
   17  1        {
   18  2          // reset to 0
   19  2          DP2 &= ~(1 << pin_num);
   20  2        }
   21  1        else if (direction == OUTPUT)
   22  1        {
   23  2          // set to 1
   24  2          DP2 |= (1 << pin_num);
   25  2        }
   26  1      }
   27         
   28         // Read a pin on P2
   29         unsigned int readPinP2(unsigned int port_pin)
   30         {
   31  1        if (P2 & (1 << port_pin))
   32  1        {
   33  2          return 1;
   34  2        }
   35  1        else
   36  1        {
   37  2          return 0;
   38  2        }
   39  1      }
   40         
   41         // Set a pin on P2 to 1
   42         // (ony works for output pins!)
   43         void setPinP2(unsigned int pin_num)
   44         {
   45  1        // Can only set pin if it's an output
   46  1        if (DP2 & (1 << pin_num))
   47  1        {
   48  2          P2 |= (1 << pin_num);
   49  2        } 
   50  1      }
   51         
   52         // Clear a pin on P2 to 1
   53         // (ony works for output pins!)
   54         void clrPinP2(unsigned int pin_num)
C166 COMPILER V7.57.0, GPIO                                                                10/07/2022 00:54:52 PAGE 2   

   55         {
   56  1        // Can only set pin if it's an output
   57  1        if (DP2 & (1 << pin_num))
   58  1        {
   59  2          P2 &= ~(1 << pin_num);
   60  2        } 
   61  1      }
   62         
   63         // Read a pin on P5
   64         unsigned int readPinP5(unsigned int port_pin)
   65         {
   66  1        if (P5 & (1 << port_pin))
   67  1        {
   68  2          return 1;
   69  2        }
   70  1        else
   71  1        {
   72  2          return 0;
   73  2        }
   74  1        
   75  1      }
   76         
   77         // Config P5 digital input control
   78         void configPinP5(unsigned int pin_num, unsigned int value)
   79         {
   80  1        if (value == 1)
   81  1        {
   82  2          P5DIDIS |= (1 << pin_num);
   83  2        }
   84  1        else if (value == 0)
   85  1        {
   86  2          P5DIDIS &= ~(1 << pin_num);
   87  2        }
   88  1      }


MODULE INFORMATION:   INITIALIZED  UNINITIALIZED
  CODE SIZE        =         142     --------
  NEAR-CONST SIZE  =    --------     --------
  FAR-CONST SIZE   =    --------     --------
  HUGE-CONST SIZE  =    --------     --------
  XHUGE-CONST SIZE =    --------     --------
  NEAR-DATA SIZE   =    --------     --------
  FAR-DATA SIZE    =    --------     --------
  XHUGE-DATA SIZE  =    --------     --------
  IDATA-DATA SIZE  =    --------     --------
  SDATA-DATA SIZE  =    --------     --------
  BDATA-DATA SIZE  =    --------     --------
  HUGE-DATA SIZE   =    --------     --------
  BIT SIZE         =    --------     --------
  INIT'L SIZE      =    --------     --------
END OF MODULE INFORMATION.


C166 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
